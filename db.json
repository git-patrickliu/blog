{"meta":{"version":1,"warehouse":"1.0.2"},"models":{"Asset":[{"_id":"themes/light/source/js/jquery.imagesloaded.min.js","path":"js/jquery.imagesloaded.min.js","modified":0},{"_id":"themes/light/source/js/gallery.js","path":"js/gallery.js","modified":0},{"_id":"themes/light/source/fancybox/jquery.fancybox.pack.js","path":"fancybox/jquery.fancybox.pack.js","modified":0},{"_id":"themes/light/source/fancybox/jquery.fancybox.css","path":"fancybox/jquery.fancybox.css","modified":0},{"_id":"themes/light/source/fancybox/fancybox_sprite@2x.png","path":"fancybox/fancybox_sprite@2x.png","modified":0},{"_id":"themes/light/source/fancybox/fancybox_sprite.png","path":"fancybox/fancybox_sprite.png","modified":0},{"_id":"themes/light/source/fancybox/fancybox_overlay.png","path":"fancybox/fancybox_overlay.png","modified":0},{"_id":"themes/light/source/fancybox/fancybox_loading@2x.gif","path":"fancybox/fancybox_loading@2x.gif","modified":0},{"_id":"themes/light/source/fancybox/fancybox_loading.gif","path":"fancybox/fancybox_loading.gif","modified":0},{"_id":"themes/light/source/fancybox/blank.gif","path":"fancybox/blank.gif","modified":0},{"_id":"themes/light/source/css/style.styl","path":"css/style.styl","modified":0},{"_id":"themes/light/source/css/font/fontawesome-webfont.woff","path":"css/font/fontawesome-webfont.woff","modified":0},{"_id":"themes/light/source/css/font/fontawesome-webfont.ttf","path":"css/font/fontawesome-webfont.ttf","modified":0},{"_id":"themes/light/source/css/font/fontawesome-webfont.svg","path":"css/font/fontawesome-webfont.svg","modified":0},{"_id":"themes/light/source/css/font/fontawesome-webfont.eot","path":"css/font/fontawesome-webfont.eot","modified":0},{"_id":"source/CNAME","path":"CNAME","modified":0}],"Cache":[{"_id":"source/404.html","shasum":"34f994dff3b19f8c2e5d81933cf2267bfdd23ac6","modified":1441375066000},{"_id":"source/_posts/access-in-oneapm.md","shasum":"f0ba7821f93d505005ce0626a7de6b1256d2a9f2","modified":1441432080000},{"_id":"source/_posts/Velocity大会总结.md","shasum":"2357a5ed82389d0c34887bc7a5db8cb3a2c09d8f","modified":1441361459000},{"_id":"source/_posts/hello-world.md","shasum":"774b507901d9b17991ace2a70263b6dd6d11999a","modified":1439957215000},{"_id":"source/_posts/duoshuo.md","shasum":"736b60f956215a006e595a766381e0c9753ebdd4","modified":1441384757000},{"_id":"source/CNAME","shasum":"ed3bd37dc79a6f74aa1a5233cf373e2c2d7998d2","modified":1441350127000},{"_id":"source/_posts/reactjs.md","shasum":"1fb98f305b9e0a7d1a82f4286a420545e7f76797","modified":1441361478000},{"_id":"source/about/index.md","shasum":"f298db19310c041e8278e54a98172e8b2a19efda","modified":1441375380000},{"_id":"themes/light/source/css/_base/utils.styl","shasum":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1441349732000},{"_id":"themes/light/languages/de.yml","shasum":"e076c7f2eb29ebcfb04d94861bf3063c4b08078c","modified":1441349732000},{"_id":"themes/light/README.md","shasum":"aa189c7ff03c60d8fceb009f5fca1a61d8a0ecdf","modified":1441349732000},{"_id":"themes/light/_config.yml","shasum":"96db0b287b379eed1257665f5b3a0d893b9f418c","modified":1441432051000},{"_id":"themes/light/LICENSE","shasum":"c6f301bc722f0af3a55267a36c1c147aeddc6e46","modified":1441349732000},{"_id":"themes/light/languages/es.yml","shasum":"de273af604b27812cfd4195e7b7f28ceff2734b3","modified":1441349732000},{"_id":"themes/light/languages/zh-CN.yml","shasum":"ca0118e9081b54cc0fca8596660bd6acf4c0308f","modified":1441349732000},{"_id":"themes/light/languages/ru.yml","shasum":"35aadf8fdd28aaff8a1c8f50e80201dcf8ce0604","modified":1441349732000},{"_id":"themes/light/layout/_partial/after_footer.ejs","shasum":"ecbdafbc2f4561d6147421d0ea1461c00353b5b3","modified":1441376412000},{"_id":"themes/light/languages/default.yml","shasum":"fd7397be7789b43c1c163ab4faf106318811c2a8","modified":1441349732000},{"_id":"themes/light/languages/zh-TW.yml","shasum":"6141b4c7a094c74bd9df7c08908d92b561c1a0c0","modified":1441349732000},{"_id":"themes/light/layout/_partial/archive.ejs","shasum":"7e4f7c2909b1b90241424ea2ff8e7b4761d8360f","modified":1441349732000},{"_id":"themes/light/layout/_partial/article.ejs","shasum":"2cb04ca5425deaa4cf901bb48a7a9f31b356b967","modified":1441356419000},{"_id":"themes/light/layout/_partial/facebook_comment.ejs","shasum":"3fdc1d0ce9177825e7417635fbc545a35d528d04","modified":1441349732000},{"_id":"themes/light/layout/_partial/footer.ejs","shasum":"1deac5914b2fc93b271732fd4d5cbd0a6f78875f","modified":1441349732000},{"_id":"themes/light/layout/_partial/google_analytics.ejs","shasum":"7cf0d1f93051bda510d49dab7f684b9d7c6ba58f","modified":1441349732000},{"_id":"themes/light/layout/_partial/comment.ejs","shasum":"95f7687af237e6101fcc86d7d3805ae07ebd95a6","modified":1441359751000},{"_id":"themes/light/layout/_partial/head.ejs","shasum":"5e110e4b0a2a896a073dfc7739220025b02a4077","modified":1441349732000},{"_id":"themes/light/layout/_partial/header.ejs","shasum":"dbe7aed3319647084c2003b7e38cf911effb777b","modified":1441459804000},{"_id":"themes/light/layout/_partial/pagination.ejs","shasum":"1206b630a07444e8744365f14ddb26095c925ae1","modified":1441349732000},{"_id":"themes/light/layout/_partial/post/category.ejs","shasum":"be740939c5c2d4ffdbed9557b4e63a590058b476","modified":1441349732000},{"_id":"themes/light/layout/_partial/post/gallery.ejs","shasum":"fafc2501d7e65983b0f5c2b58151ca12e57c0574","modified":1441349732000},{"_id":"themes/light/layout/_partial/post/share.ejs","shasum":"24c04b319f1b19e887c42db961b90a7e0ab26fdc","modified":1441349732000},{"_id":"themes/light/layout/_partial/post/tag.ejs","shasum":"095418df66a27a28cbab16d7cb0d16001b0e23f1","modified":1441349732000},{"_id":"themes/light/layout/_partial/post/title.ejs","shasum":"d7fbc575d35ae68f9045a382c651450e4131f335","modified":1441349732000},{"_id":"themes/light/layout/_partial/sidebar.ejs","shasum":"caf351797a18d03d8ee945ceb9f83785c50c09f9","modified":1441349732000},{"_id":"themes/light/layout/_widget/archive.ejs","shasum":"985fbeb01142b9d526cda8ebc372c1d361d69a6b","modified":1439957215000},{"_id":"themes/light/layout/_widget/category.ejs","shasum":"8a2b90dc29661371f060f710668929c3588e15e4","modified":1441349732000},{"_id":"themes/light/layout/_widget/recent_posts.ejs","shasum":"f17d2cb69034acabea4df54f301f80812e7b84a8","modified":1441349732000},{"_id":"themes/light/layout/archive.ejs","shasum":"a18842e3d719fe3ca9b977a6995f8facc75c8673","modified":1441349732000},{"_id":"themes/light/layout/_widget/search.ejs","shasum":"55c707f3aa7453c305c41898ad22556edd213830","modified":1441349732000},{"_id":"themes/light/layout/_widget/tag.ejs","shasum":"1914db78bea49c333067d79fe7ad9567d2b08d00","modified":1441349732000},{"_id":"themes/light/layout/_widget/tagcloud.ejs","shasum":"a236c86481196ae43206e056ba78cec14f1ac014","modified":1441349732000},{"_id":"themes/light/layout/category.ejs","shasum":"9b740fc33f6f028df60f0bc4312bf3ebd03aa8ea","modified":1441349732000},{"_id":"themes/light/layout/index.ejs","shasum":"e569d8fe0741a24efb89e44781f9e616da17e036","modified":1441349732000},{"_id":"themes/light/layout/page.ejs","shasum":"70cbc9854655773cc6ba84eecaaf330fed430465","modified":1441349732000},{"_id":"themes/light/source/css/_base/layout.styl","shasum":"1b58c21aa48a8f9f7f811af681ac182dd058e23d","modified":1441349732000},{"_id":"themes/light/layout/post.ejs","shasum":"1173e49244299cf870a78831593153f63829cd68","modified":1441356375000},{"_id":"themes/light/source/css/_base/variable.styl","shasum":"6f3ad13e49634dae8cd992bbd598f5ff0b39a816","modified":1441349732000},{"_id":"themes/light/source/css/_partial/archive.styl","shasum":"072e9b8c5ee9acf95ac7cce9c34706d41e412229","modified":1441349732000},{"_id":"themes/light/source/css/_partial/article.styl","shasum":"efb940d038b427786b0a8ca944f4ca02ad6f863f","modified":1441352559000},{"_id":"themes/light/source/css/_partial/comment.styl","shasum":"e7f8c085bfa8c26afc4b2fbc9f2092f4f07aef34","modified":1441349732000},{"_id":"themes/light/source/css/_partial/header.styl","shasum":"50d36fe0c803cbba69dd57493611466e4d72156e","modified":1441349732000},{"_id":"themes/light/source/css/_partial/index.styl","shasum":"7a8c0ec6ab99a9f8e00c9687aca29d31752424a2","modified":1441349732000},{"_id":"themes/light/source/css/_partial/sidebar.styl","shasum":"a8bf5237d7d2fba66988cfb85a3ae218be8709ae","modified":1441349732000},{"_id":"themes/light/source/css/_partial/syntax.styl","shasum":"8d20eb41b8ba290b6c7d520c4f2d88bb9b51d60e","modified":1441349732000},{"_id":"themes/light/source/css/_partial/footer.styl","shasum":"1757872dbdbd09295a625f13e356aa798a8bb308","modified":1441349732000},{"_id":"themes/light/layout/tag.ejs","shasum":"45150a2365768b6b67880193c9264ad2bb4814db","modified":1441349732000},{"_id":"themes/light/source/css/font/fontawesome-webfont.eot","shasum":"d775f599ff3f23be082e6a9604b4898718923a37","modified":1441349732000},{"_id":"themes/light/layout/layout.ejs","shasum":"72da76881ebf00e71d7cc196f377e37a17ec7a6f","modified":1441349732000},{"_id":"themes/light/source/css/style.styl","shasum":"c03b2520e4a85b981e29516cadc0a365e6500e3d","modified":1441349732000},{"_id":"themes/light/source/fancybox/blank.gif","shasum":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1441349732000},{"_id":"themes/light/source/css/font/fontawesome-webfont.woff","shasum":"0612cddf2f835cceffccc88fd194f97367d0b024","modified":1441349732000},{"_id":"themes/light/source/fancybox/fancybox_loading.gif","shasum":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1441349732000},{"_id":"themes/light/source/fancybox/fancybox_loading@2x.gif","shasum":"273b123496a42ba45c3416adb027cd99745058b0","modified":1441349732000},{"_id":"themes/light/source/fancybox/jquery.fancybox.css","shasum":"5f163444617b6cf267342f06ac166a237bb62df9","modified":1441349732000},{"_id":"themes/light/source/fancybox/fancybox_sprite.png","shasum":"17df19f97628e77be09c352bf27425faea248251","modified":1441349732000},{"_id":"themes/light/source/fancybox/jquery.fancybox.pack.js","shasum":"53360764b429c212f424399384417ccc233bb3be","modified":1441349732000},{"_id":"themes/light/source/js/gallery.js","shasum":"f8a4ba7fb8349cca374a3c69fff9b2bf21f742ed","modified":1441349732000},{"_id":"themes/light/source/js/jquery.imagesloaded.min.js","shasum":"4109837b1f6477bacc6b095a863b1b95b1b3693f","modified":1441349732000},{"_id":"themes/light/source/fancybox/fancybox_overlay.png","shasum":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1441349732000},{"_id":"themes/light/source/fancybox/fancybox_sprite@2x.png","shasum":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1441349732000},{"_id":"themes/light/source/css/font/fontawesome-webfont.ttf","shasum":"a9468f6a1fe965fbcaf5a1bd6c11705e2fc5f84c","modified":1441349732000},{"_id":"themes/light/source/css/font/fontawesome-webfont.svg","shasum":"d162419c91b8bab3a4fd327c933a0fcf3799c251","modified":1441349732000},{"_id":"public/js/jquery.imagesloaded.min.js","modified":1441376422929,"shasum":"4109837b1f6477bacc6b095a863b1b95b1b3693f"},{"_id":"public/js/gallery.js","modified":1441376422933,"shasum":"f8a4ba7fb8349cca374a3c69fff9b2bf21f742ed"},{"_id":"public/fancybox/jquery.fancybox.pack.js","modified":1441376422935,"shasum":"53360764b429c212f424399384417ccc233bb3be"},{"_id":"public/fancybox/jquery.fancybox.css","modified":1441376422937,"shasum":"5f163444617b6cf267342f06ac166a237bb62df9"},{"_id":"public/fancybox/fancybox_sprite@2x.png","modified":1441376422942,"shasum":"30c58913f327e28f466a00f4c1ac8001b560aed8"},{"_id":"public/fancybox/fancybox_sprite.png","modified":1441376422946,"shasum":"17df19f97628e77be09c352bf27425faea248251"},{"_id":"public/fancybox/fancybox_overlay.png","modified":1441376422948,"shasum":"b3a4ee645ba494f52840ef8412015ba0f465dbe0"},{"_id":"public/fancybox/fancybox_loading@2x.gif","modified":1441376422952,"shasum":"273b123496a42ba45c3416adb027cd99745058b0"},{"_id":"public/fancybox/fancybox_loading.gif","modified":1441376422957,"shasum":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c"},{"_id":"public/fancybox/blank.gif","modified":1441376422960,"shasum":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a"},{"_id":"public/css/style.css","modified":1441376423564,"shasum":"307268ff2e4e741e7625c53acf71d745154ca154"},{"_id":"public/css/font/fontawesome-webfont.woff","modified":1441376423687,"shasum":"0612cddf2f835cceffccc88fd194f97367d0b024"},{"_id":"public/css/font/fontawesome-webfont.ttf","modified":1441376423690,"shasum":"a9468f6a1fe965fbcaf5a1bd6c11705e2fc5f84c"},{"_id":"public/css/font/fontawesome-webfont.svg","modified":1441376423694,"shasum":"d162419c91b8bab3a4fd327c933a0fcf3799c251"},{"_id":"public/css/font/fontawesome-webfont.eot","modified":1441376423696,"shasum":"d775f599ff3f23be082e6a9604b4898718923a37"},{"_id":"public/CNAME","modified":1441376423699,"shasum":"ed3bd37dc79a6f74aa1a5233cf373e2c2d7998d2"},{"_id":"public/404.html","modified":1441459812375,"shasum":"0fc1514a8a101f0594e129c52f92b071e153c4a5"},{"_id":"public/about/index.html","modified":1441459812392,"shasum":"5d94ad54182e5e085a1ebdc3ecb94c46fec9fbfa"},{"_id":"public/2015/09/04/access-in-oneapm/index.html","modified":1441459812419,"shasum":"1984a2e0fbbe8aec6e2dbb4fc123af07b68dfad4"},{"_id":"public/2015/09/04/duoshuo/index.html","modified":1441459812429,"shasum":"a87c70d7678f2b062a70253c65e94ef04535d574"},{"_id":"public/2015/08/19/Velocity大会总结/index.html","modified":1441459812442,"shasum":"de346035bc0e9d71853b3baec6606c77edd7fb52"},{"_id":"public/2015/08/19/reactjs/index.html","modified":1441459812463,"shasum":"030f336a8dc77410ed1eb63cf32614fcda4c75ed"},{"_id":"public/2015/08/19/hello-world/index.html","modified":1441459812480,"shasum":"440fa9fdd9c641cb3533642a74d24a78935ba59c"},{"_id":"public/index.html","modified":1441459812502,"shasum":"bfe6b7a7a960ed90ce8cb6e2daa98aa457e7b507"},{"_id":"public/archives/index.html","modified":1441459812514,"shasum":"3dd5773c4c9e95087918fad5f62dce5176ca61a1"},{"_id":"public/archives/2015/index.html","modified":1441459812526,"shasum":"5383945904de0414fd97fbd66cb05d8f435b0640"},{"_id":"public/archives/2015/08/index.html","modified":1441459812536,"shasum":"32834f505a8c85401e1a87a71c442109ceec6e1a"},{"_id":"public/archives/2015/09/index.html","modified":1441459812554,"shasum":"c4c7971302822d10718a8eba3ae150b868983d18"},{"_id":"public/atom.xml","modified":1441432088547,"shasum":"0cb10e6345ae732e0bcbf95095c41795a27cb531"},{"_id":"public/tags/reactjs/index.html","modified":1441459812564,"shasum":"db46f2e4472f460b40b7d1c14d5344506e688c96"},{"_id":"public/tags/多说/index.html","modified":1441459812576,"shasum":"45638109c372378386a0559211a57c8c77c3f08c"},{"_id":"public/tags/velocity/index.html","modified":1441459812586,"shasum":"bc85ee9f0e81c6860302db59f49520bd8e2cc1f5"},{"_id":"public/sitemap.xml","modified":1441432088550,"shasum":"9f89a10c201adac3f926869e0d50dceca888ce22"},{"_id":"public/tags/OneApm-APM-monitor/index.html","modified":1441384573215,"shasum":"13b07ad7018cad06d9f473bd996bc0d32b607262"},{"_id":"public/tags/OneApm/index.html","modified":1441459812595,"shasum":"2da4a3bfcd0552a36fa85f029e8749d5586a91ac"},{"_id":"public/tags/APM/index.html","modified":1441459812608,"shasum":"af8e6fbbbe0a0e4929a11610791ed25d3ad95167"},{"_id":"public/tags/monitor/index.html","modified":1441459812619,"shasum":"dfb6ce50c5bf527c32a6f6a6bbb22697acec8d17"}],"Category":[],"Data":[],"Page":[{"_content":"<!DOCTYPE html>\n<html>\n<head lang=\"en\">\n    <meta charset=\"UTF-8\">\n    <title></title>\n</head>\n<body>\n<script type=\"text/javascript\" src=\"http://www.qq.com/404/search_children.js\" charset=\"utf-8\" homePageUrl=\"http://blog.dapenggaofei.com\" homePageName=\"回到我的主页\"></script>\n</body>\n</html>\n","source":"404.html","raw":"<!DOCTYPE html>\n<html>\n<head lang=\"en\">\n    <meta charset=\"UTF-8\">\n    <title></title>\n</head>\n<body>\n<script type=\"text/javascript\" src=\"http://www.qq.com/404/search_children.js\" charset=\"utf-8\" homePageUrl=\"http://blog.dapenggaofei.com\" homePageName=\"回到我的主页\"></script>\n</body>\n</html>\n","date":"2015-09-04T13:57:46.000Z","updated":"2015-09-04T13:57:46.000Z","path":"404.html","title":"","comments":1,"layout":"page","_id":"cie5qb1dk0000n7b903pn5m90"},{"title":"about me","date":"2015-09-04T13:52:08.000Z","_content":"\n单飞企鹅，现工作在方付通:)\n\n\n","source":"about/index.md","raw":"title: about me\ndate: 2015-09-04 21:52:08\n---\n\n单飞企鹅，现工作在方付通:)\n\n\n","updated":"2015-09-04T14:03:00.000Z","path":"about/index.html","comments":1,"layout":"page","_id":"cie5qb1ee0001n7b9j5wqdd5g"}],"Post":[{"title":"reactjs","date":"2015-08-19T11:51:16.000Z","_content":"","source":"_posts/reactjs.md","raw":"title: reactjs\ndate: 2015-08-19 19:51:16\ntags: reactjs\n---\n","slug":"reactjs","published":1,"updated":"2015-09-04T10:11:18.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cie5qb1eh0002n7b9xkv4brj1"},{"title":"Hello World","_content":"Welcome to [Hexo](http://hexo.io/)! This is your very first post. Check [documentation](http://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](http://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](http://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](http://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](http://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](http://hexo.io/docs/deployment.html)\n","source":"_posts/hello-world.md","raw":"title: Hello World\n---\nWelcome to [Hexo](http://hexo.io/)! This is your very first post. Check [documentation](http://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](http://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](http://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](http://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](http://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](http://hexo.io/docs/deployment.html)\n","slug":"hello-world","published":1,"date":"2015-08-19T04:06:55.000Z","updated":"2015-08-19T04:06:55.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cie5qb1eo0005n7b968ce5cc0"},{"title":"接入多说评论","date":"2015-09-04T09:22:16.000Z","_content":"\n我这个blog是基于[hexo](http://hexo.io)构建的，是纯静态html的。所以评论就是一个问题，在网上搜了一下发现[多说](http://dev.duoshuo.com/)，可以实现评论的功能。\n多说是通过在你的页面当中内嵌一个多说的JS来实现评论的功能。所以我们需要将多说的JS内嵌到我们的hexo创建的博客当中。\n\n### 1. 多说添加网站\n当然，首先我们需要在多说添加一个网站，[多说创建页面](http://duoshuo.com/create-site/)，在此页面添加你自己的网站信息。\n\n### 2. 拷贝通用代码\n然后进入对应的管理后台，选择 `工具` -- `获取代码` -- `通用代码`, 然后可以查看到多说需要你在你的页面中插入的代码。\n\n### 3. 修改_config.yml\n到hexo你的博客的根目录，在_config.yml里面新增一个变量，如duoshuo_shortname: your-short-name-in-duo-shuo。这个变量名是随便起的，但是要跟下一步对应起来。变量值，是你在第1步当中输入的多说域名。\n\n### 4. 修改主题中评论代码\n到hexo当中找到你选用的themes的文件夹，比如我用的是light的主题，则在themes/light/layout/_partial/comment.ejs, 其实不同的主题，对应的文件是不一样的，这一步就需要大家稍微去看一下里面的代码。比如我这边light主题comment.ejs里面其实已经有light主题内置的facebook或disqus评论组件，然并卵，这是一个不存在的网站。\n原始代码是：\n```javascript\n<% if (page.comments){ %>\n<section id=\"comment\">\n  <h1 class=\"title\"><%= __('comment') %></h1>\n\n  <% if (theme.comment_provider == \"facebook\") {\n      if (theme.facebook) { %>\n      <%- partial('_partial/facebook_comment', {fbConfig: theme.facebook}) %>\n      <% } %>\n  <% } else if(config.disqus_shortname) { %>\n  <div id=\"disqus_thread\">\n    <noscript>Please enable JavaScript to view the <a href=\"//disqus.com/?ref_noscript\">comments powered by Disqus.</a></noscript>\n  </div>\n  <% } %>\n</section>\n<% } %>\n```\n在度娘搜示例的时候，里面出现的变量是post，如果二话不说，将代码直接替换，hexo编译的时候会出问题。如[多说官方](http://dev.duoshuo.com/threads/541d3b2b40b5abcd2e4df0e9)提供了这个示例。\n```javascript\n<% if (!index && post.comments && config.duoshuo_shortname){ %>\n  <section id=\"comments\">\n    <!-- 多说评论框 start -->\n    <div class=\"ds-thread\" data-thread-key=\"<%= post.layout %>-<%= post.slug %>\" data-title=\"<%= post.title %>\" data-url=\"<%= page.permalink %>\"></div>\n    <!-- 多说评论框 end -->\n    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->\n    <script type=\"text/javascript\">\n    var duoshuoQuery = {short_name:'<%= config.duoshuo_shortname %>'};\n      (function() {\n        var ds = document.createElement('script');\n        ds.type = 'text/javascript';ds.async = true;\n        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';\n        ds.charset = 'UTF-8';\n        (document.getElementsByTagName('head')[0]\n         || document.getElementsByTagName('body')[0]).appendChild(ds);\n      })();\n      </script>\n    <!-- 多说公共JS代码 end -->\n  </section>\n  <% } %>\n```\n相信熟悉ejs模板语言的都清楚，如果调用comment.ejs的地方没有传入post参数，则在当前页面不能调用这个值。我们看一下发现在article.ejs当中有调用comment.ejs。最下面一行，`<%- partial('comment') %>`，在页面当中有传入item的值，并且我们简单看了一下item的一些属性值和post有点像，我们大胆地将最后一行改成`<%- partial('comment', { post: item }) %>`，然后运行一下` hexo g `，发现可行。这样就改好了。\n\n其实对于其他类型的themes其实也是一样的。看一下代码改改变量就ok了。\n按照之上几步就可以在hexo博客当中插入多说评论。大家有问题欢迎评论。谢谢：)。\n\n### 参考\n1. 更多的信息请查看 http://ibruce.info/2013/11/22/hexo-your-blog/\n","source":"_posts/duoshuo.md","raw":"title: 接入多说评论\ndate: 2015-09-04 17:22:16\ntags: 多说\n---\n\n我这个blog是基于[hexo](http://hexo.io)构建的，是纯静态html的。所以评论就是一个问题，在网上搜了一下发现[多说](http://dev.duoshuo.com/)，可以实现评论的功能。\n多说是通过在你的页面当中内嵌一个多说的JS来实现评论的功能。所以我们需要将多说的JS内嵌到我们的hexo创建的博客当中。\n\n### 1. 多说添加网站\n当然，首先我们需要在多说添加一个网站，[多说创建页面](http://duoshuo.com/create-site/)，在此页面添加你自己的网站信息。\n\n### 2. 拷贝通用代码\n然后进入对应的管理后台，选择 `工具` -- `获取代码` -- `通用代码`, 然后可以查看到多说需要你在你的页面中插入的代码。\n\n### 3. 修改_config.yml\n到hexo你的博客的根目录，在_config.yml里面新增一个变量，如duoshuo_shortname: your-short-name-in-duo-shuo。这个变量名是随便起的，但是要跟下一步对应起来。变量值，是你在第1步当中输入的多说域名。\n\n### 4. 修改主题中评论代码\n到hexo当中找到你选用的themes的文件夹，比如我用的是light的主题，则在themes/light/layout/_partial/comment.ejs, 其实不同的主题，对应的文件是不一样的，这一步就需要大家稍微去看一下里面的代码。比如我这边light主题comment.ejs里面其实已经有light主题内置的facebook或disqus评论组件，然并卵，这是一个不存在的网站。\n原始代码是：\n```javascript\n<% if (page.comments){ %>\n<section id=\"comment\">\n  <h1 class=\"title\"><%= __('comment') %></h1>\n\n  <% if (theme.comment_provider == \"facebook\") {\n      if (theme.facebook) { %>\n      <%- partial('_partial/facebook_comment', {fbConfig: theme.facebook}) %>\n      <% } %>\n  <% } else if(config.disqus_shortname) { %>\n  <div id=\"disqus_thread\">\n    <noscript>Please enable JavaScript to view the <a href=\"//disqus.com/?ref_noscript\">comments powered by Disqus.</a></noscript>\n  </div>\n  <% } %>\n</section>\n<% } %>\n```\n在度娘搜示例的时候，里面出现的变量是post，如果二话不说，将代码直接替换，hexo编译的时候会出问题。如[多说官方](http://dev.duoshuo.com/threads/541d3b2b40b5abcd2e4df0e9)提供了这个示例。\n```javascript\n<% if (!index && post.comments && config.duoshuo_shortname){ %>\n  <section id=\"comments\">\n    <!-- 多说评论框 start -->\n    <div class=\"ds-thread\" data-thread-key=\"<%= post.layout %>-<%= post.slug %>\" data-title=\"<%= post.title %>\" data-url=\"<%= page.permalink %>\"></div>\n    <!-- 多说评论框 end -->\n    <!-- 多说公共JS代码 start (一个网页只需插入一次) -->\n    <script type=\"text/javascript\">\n    var duoshuoQuery = {short_name:'<%= config.duoshuo_shortname %>'};\n      (function() {\n        var ds = document.createElement('script');\n        ds.type = 'text/javascript';ds.async = true;\n        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';\n        ds.charset = 'UTF-8';\n        (document.getElementsByTagName('head')[0]\n         || document.getElementsByTagName('body')[0]).appendChild(ds);\n      })();\n      </script>\n    <!-- 多说公共JS代码 end -->\n  </section>\n  <% } %>\n```\n相信熟悉ejs模板语言的都清楚，如果调用comment.ejs的地方没有传入post参数，则在当前页面不能调用这个值。我们看一下发现在article.ejs当中有调用comment.ejs。最下面一行，`<%- partial('comment') %>`，在页面当中有传入item的值，并且我们简单看了一下item的一些属性值和post有点像，我们大胆地将最后一行改成`<%- partial('comment', { post: item }) %>`，然后运行一下` hexo g `，发现可行。这样就改好了。\n\n其实对于其他类型的themes其实也是一样的。看一下代码改改变量就ok了。\n按照之上几步就可以在hexo博客当中插入多说评论。大家有问题欢迎评论。谢谢：)。\n\n### 参考\n1. 更多的信息请查看 http://ibruce.info/2013/11/22/hexo-your-blog/\n","slug":"duoshuo","published":1,"updated":"2015-09-04T16:39:17.000Z","_id":"cie5qb1es0006n7b9lyv4rja9","comments":1,"layout":"post","photos":[],"link":""},{"title":"OneApm，just the one.","date":"2015-09-04T14:07:51.000Z","_content":"\n先用一组数据来开始整篇文章吧。\n1. 如果亚马逊页面加载每慢100ms，将影响他们1%的收入。\n2. 如果谷歌页面加载慢500ms，流量将锐减20%。来自 [gigaspaces](http://blog.gigaspaces.com/amazon-found-every-100ms-of-latency-cost-them-1-in-sales/)\n\n这是一组08年的数据，而现在，页面延迟对公司来说影响会更大(虽然网络变快了很多，但是大家使用网络的习惯变化了，现在大家经常是用手机来接入网络，而移动网络是很不稳定的)。\n页面加载速度，是如此的重要，所以我们就需要对前端页面加载速度进行不断的优化。这第一步自然就是获取用户的真实加载的情况，要不然只能闭门造车，纸上谈兵。\n\n其实，我们在这第一步就受阻了。因为我们发现市面上并没有一款产品足够好用，能够让我们即时检测用户的页面加载情况。我们知道一些大公司是有相关的监控工具，但是没有对外开放。而如果公司内部自己开发的话，将是一个非常大的工程，并且统计出的结果未必精确，之后的维护也是很麻烦的一件事情。还好我们一直都有关注前端的一些技术会议。在报名[Velocity](velocity.oreilly.com.cn/2015/index.php)的时候，我们认识了[OneAPM](http://www.oneapm.com)。\n\n大家可以看看Velocity的赞助商们（不得不吐槽一下，这届Velocity，有一半都是赞助商们的广告），基本都是围绕着APM这个话题。我也趁机将他们中的绝大多数都试用了一下，最后选中了OneAPM作为我们暂时的前端加载速度监测工具。\n\nOneAPM都有一些什么特色，让我们最终选择了她呢？我总结了一下大概有以下几点：\n\n### OneAPM 提供了两种前端监测代码注入方式。\n一种是用户手动在html当中插入script，一种是通过用户部署后台agent自动插入script。\n\n我想说，大家都习惯了用google分析，百度分析，腾讯分析等等，对在页面当中插入一段受信任方的JS并没有多大的反感。所以我开始试用就是采用了第一种方式，方便快捷，并且对代码影响是最小的。有某些APM工具，只支持上面的第二种，门槛略高，要想用一下还得改后台代码，还是挺麻烦了。\n\n###  OneAPM 提供了非常丰富的展现维度\n大家可以去[OneAPM](http://www.oneapm.com)上看一下，展现的`维度`是相当的丰富。\n\n![OneAPM sidebar ](http://7xkybo.com1.z0.glb.clouddn.com/oneapm1.png)\nOneAPM并不只是提供简单的浏览器performance的上报，而是对其进行了一定的归纳，将其归为，白屏时间、首屏时间、H5启动时间和网页就绪时间（这样挺好，但是我觉得如果也能同时展示出原始的performance信息，对专业调优的前端会更友好一些）。\n\n还支持`浏览器`, `运营商`, `地理` 三个围度的加载情况查看。提供了慢事务追踪，静态文件加载瀑布流。\n![总览](http://7xkybo.com1.z0.glb.clouddn.com/oneapm2.png)\n\n其实上面2点，是我们最初想要的功能。能提供我们就已经很开心了。后面的几个额外功能更加让我们确信要使用OneAPM了。\n\n### Ajax耗时功能\n这是一个非常好用的功能。相信后台艰苦卓绝的将后台CGI响应减少了10ms，但是前端一不小心就多了100ms，甚至大几百ms。所以前端AJAX测速同样是非常重要的。我们可以在这查看到哪一些CGI的速度慢，可以进行专项优化。\n\n### 脚本错误功能\n这个功能不得不赞一下，因为他让我们发现了不少内嵌APP页面的错误。开发过mobile APP内嵌页的同学们都知道，移动端的调试非常麻烦，而移动端的错误就更加难以捕捉。有了这个功能，我们可以迅速知道我们线上页面的健康度（尤其是线上出现重大BUG，突发某一些错误时）。\n\n### HTTPS!!!\n其实这个最重要。。因为如果不支持HTTPS的话，我们就直接bye bye走人了。因为我们的页面对安全要求比较高，是全站HTTPS的。而OneAPM是HTTP和HTTPS都支持的。\n\n### 强大的技术支持\n我只是在试用阶段，北京的OneAPM同学就直接拉了一个群，非常热心地解决我的各种试用问题，和解答各种技术上的疑惑。企业产品和个人产品不一样，企业产品最重要的是要用得放心，舒心。对于我来说，OneAPM做到了。\n\n综上，有了详细的用户加载时间，我们才能进行下一步的专项优化。\n\nPS: 当然有要吐槽的：\n1. 吞吐量的单位ppm，还是没有习惯，弄成PV是不是更好一些？\n2. 页面展示的维度，取path是不够的，这样容易让开发，测试和线上的数据混在一起。\n","source":"_posts/access-in-oneapm.md","raw":"title: OneApm，just the one.\ndate: 2015-09-04 22:07:51\ntags:\n- OneApm\n- APM\n- monitor\n\n---\n\n先用一组数据来开始整篇文章吧。\n1. 如果亚马逊页面加载每慢100ms，将影响他们1%的收入。\n2. 如果谷歌页面加载慢500ms，流量将锐减20%。来自 [gigaspaces](http://blog.gigaspaces.com/amazon-found-every-100ms-of-latency-cost-them-1-in-sales/)\n\n这是一组08年的数据，而现在，页面延迟对公司来说影响会更大(虽然网络变快了很多，但是大家使用网络的习惯变化了，现在大家经常是用手机来接入网络，而移动网络是很不稳定的)。\n页面加载速度，是如此的重要，所以我们就需要对前端页面加载速度进行不断的优化。这第一步自然就是获取用户的真实加载的情况，要不然只能闭门造车，纸上谈兵。\n\n其实，我们在这第一步就受阻了。因为我们发现市面上并没有一款产品足够好用，能够让我们即时检测用户的页面加载情况。我们知道一些大公司是有相关的监控工具，但是没有对外开放。而如果公司内部自己开发的话，将是一个非常大的工程，并且统计出的结果未必精确，之后的维护也是很麻烦的一件事情。还好我们一直都有关注前端的一些技术会议。在报名[Velocity](velocity.oreilly.com.cn/2015/index.php)的时候，我们认识了[OneAPM](http://www.oneapm.com)。\n\n大家可以看看Velocity的赞助商们（不得不吐槽一下，这届Velocity，有一半都是赞助商们的广告），基本都是围绕着APM这个话题。我也趁机将他们中的绝大多数都试用了一下，最后选中了OneAPM作为我们暂时的前端加载速度监测工具。\n\nOneAPM都有一些什么特色，让我们最终选择了她呢？我总结了一下大概有以下几点：\n\n### OneAPM 提供了两种前端监测代码注入方式。\n一种是用户手动在html当中插入script，一种是通过用户部署后台agent自动插入script。\n\n我想说，大家都习惯了用google分析，百度分析，腾讯分析等等，对在页面当中插入一段受信任方的JS并没有多大的反感。所以我开始试用就是采用了第一种方式，方便快捷，并且对代码影响是最小的。有某些APM工具，只支持上面的第二种，门槛略高，要想用一下还得改后台代码，还是挺麻烦了。\n\n###  OneAPM 提供了非常丰富的展现维度\n大家可以去[OneAPM](http://www.oneapm.com)上看一下，展现的`维度`是相当的丰富。\n\n![OneAPM sidebar ](http://7xkybo.com1.z0.glb.clouddn.com/oneapm1.png)\nOneAPM并不只是提供简单的浏览器performance的上报，而是对其进行了一定的归纳，将其归为，白屏时间、首屏时间、H5启动时间和网页就绪时间（这样挺好，但是我觉得如果也能同时展示出原始的performance信息，对专业调优的前端会更友好一些）。\n\n还支持`浏览器`, `运营商`, `地理` 三个围度的加载情况查看。提供了慢事务追踪，静态文件加载瀑布流。\n![总览](http://7xkybo.com1.z0.glb.clouddn.com/oneapm2.png)\n\n其实上面2点，是我们最初想要的功能。能提供我们就已经很开心了。后面的几个额外功能更加让我们确信要使用OneAPM了。\n\n### Ajax耗时功能\n这是一个非常好用的功能。相信后台艰苦卓绝的将后台CGI响应减少了10ms，但是前端一不小心就多了100ms，甚至大几百ms。所以前端AJAX测速同样是非常重要的。我们可以在这查看到哪一些CGI的速度慢，可以进行专项优化。\n\n### 脚本错误功能\n这个功能不得不赞一下，因为他让我们发现了不少内嵌APP页面的错误。开发过mobile APP内嵌页的同学们都知道，移动端的调试非常麻烦，而移动端的错误就更加难以捕捉。有了这个功能，我们可以迅速知道我们线上页面的健康度（尤其是线上出现重大BUG，突发某一些错误时）。\n\n### HTTPS!!!\n其实这个最重要。。因为如果不支持HTTPS的话，我们就直接bye bye走人了。因为我们的页面对安全要求比较高，是全站HTTPS的。而OneAPM是HTTP和HTTPS都支持的。\n\n### 强大的技术支持\n我只是在试用阶段，北京的OneAPM同学就直接拉了一个群，非常热心地解决我的各种试用问题，和解答各种技术上的疑惑。企业产品和个人产品不一样，企业产品最重要的是要用得放心，舒心。对于我来说，OneAPM做到了。\n\n综上，有了详细的用户加载时间，我们才能进行下一步的专项优化。\n\nPS: 当然有要吐槽的：\n1. 吞吐量的单位ppm，还是没有习惯，弄成PV是不是更好一些？\n2. 页面展示的维度，取path是不够的，这样容易让开发，测试和线上的数据混在一起。\n","slug":"access-in-oneapm","published":1,"updated":"2015-09-05T05:48:00.000Z","_id":"cie5qb1ev0009n7b9kivds01n","comments":1,"layout":"post","photos":[],"link":""},{"title":"Velocity会议总结","date":"2015-08-19T11:52:16.000Z","_content":"\n关键词：https优化，前端加载优化，hybrid，APM(application performance monitor）。\n\n1. https优化。\n> - HttpDNS, 通过http方式向第三方的固定IP方式来获取指定域名的IP来进行DNS解析[^httpDNS]（我们可以考虑在客户端新增HttpDNS）\n> - 启用HSTS[^HSTS] （我们尚未全站启用https，所以这个不太好启动）\n> - 启用OCSP Stapling[^OCSP]（可以采用，但需要查看兼容性以及要及时更新签名，以及注意证书链大小）\n> - 复用session，减少握手次数\n> - 精确设置TLS Record Size，size过小，overhead比重增大，size过大，单record的TCP分段过多\n> - TLS硬件加速\n> - SPDY/HTTP2.0，可以研究，但近期可能用不上。\n> - 配置Forward secrecy cipher 支持False start[^falsestart]  （可以采用，省掉一个RTT时间）\n> - 升级openssl版本到最新（我们的版本是openssl-1.0.2c）\n> - 确认TLS压缩禁用（nginx 1.3.x以上版本都自动关闭，不关闭有漏洞，我们nginx是1.6.3）\n> - 确认SNI支持 （已支持，多个证书部署在同一个IP上）\n> - 使用 **//**，来引用静态资源文件，保证http能无缝迁到https环境（我们已经使用了，但是一个360的同僚说在某些地方的移动运营商会将**//** 篡改为 **/**。但是iPhone5s 上海中国移动未发现问题）。\n> ![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0612.JPG)\n\n2. 页面直出方法，对比？\n> - nginx + lua 页面直出（京东618采用）\n> ![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0571.JPG)\n> - ATS （apache traffic server）页面直出（Yahoo采用）\n> - nodejs直出\n\n3. 前端加载优化\n> - ebay优化尝试：DSA（dynamic site accelerate）动态加速，加快页面加载，采用WebP格式优化图片大小（理论能优化到以前60%大小）。\n> - composition layer，z-index相同导致的渲染变慢（阿里分享），可查看 [css conf](http://www.w3ctech.com/topic/1463) 360的分享有讨论此问题。\n\n4. hybrid\n> - 百度 Blend UI系统架构。通过封装统一JS UI API，如果是在百度app内部的webview，则调用的是原生的UI样式，否则调用的是JS统一的UI样式[^blendUI]\n> - Yahoo 采用reactjs + [flux](https://facebook.github.io/flux/)\n\n\n5. APM\n> - 今年的趋势是APM（application performance monitor），赞助商基本都是APM厂商（云智慧，性能魔方，性能极客，OneAPM，野狗等）。\n> - 我们正在试用[OneAPM](https://tpm.oneapm.com/tpm/account/717715137/browser/1326753/overview/#/)进行页面加载测试。\n\n#### 总结：\n\n##### 一些方法论：\n> - 保持simplicity\n> ![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0560.JPG)\n> - build high performance team\n> ![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0585.JPG)\n> - 优化问题方法论\n> ![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0616.JPG)\n\n\n##### 我们暂时能够跟进的：\n> - 客户端采用http协议的httpDNS来加速DNS查询，能有效防止之前DNS解析问题。\n> - https优化全部跟进，已将dev全部改成TLSv1.2，排期全部改造并上线。\n> - CDN动态加速（DSA）咨询，并开启。\n> - hybrid现阶段讨论结果是采用PhoneGap。\n> - 试用OneAPM跟进数据，然后基于数据进行优化。\n\n\n##### 一些有用的网站分享：\n1. 关于html标准的网站。\n> - [specifiction](http://specifiction.wicg.io)|[Discourse](http://discourse.wicg.io) ask question\n> - Contribute tests on [testthewebforward](http://testthewebforward.org)\n> - [W3 Community](http://www.w3.org/community/wicg)\n> - [extensiblewebmanifesto](http://extensiblewebmanifesto.org)\n> - [webcomponents](http://webcomponents.org)\n\n2. [SSLLabs](https://ssllabs.com/) 查看你的网站https安不安全\n3. [百度https实践](http://op.baidu.com/2015/04/https-s01a01/)\n\n[^httpDNS]: 这种方式可以解释我们之前域名被加黑名单的问题，但是如果又新增加域名，得客户端随时修改，建议通过下发方式来实现新域名prefetch。\n\n[^HSTS]: HTTP Strict Transport Security。我们现在请求http的站点时，会自动跳转到https的页面，其实这一步是存在安全风险的，但是通过HSTS，设置响应头Strict-Transport-Security: max-age=31536000; includeSubDomains，可保证用户即使输入http页面，也在浏览器级别会自动请求https页面，不需要经过服务器跳转。\n\n[^OCSP]: 浏览器在下载服务端的证书之后会向证书发行商验证证书的合法性。因为是向国外网站验证，所以速度慢并存在着失败的可能性。所以可用的做法是在服务器端预先向服务器进行验证，然后打包证书供浏览器下载，这样浏览器就不用再去验证证书的合法性。注意，有效期大概为1个月。详见[网址](https://blog.xjpvictor.info/2013/09/nginx-ocsp-stapling/)。\n\n[^falsestart]: 查看[网址](http://chimera.labs.oreilly.com/books/1230000000545/ch04.html)，啥是false start（抢跑）。\n\n[^blendUI]: 百度blendUI详细如下：\n![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0593.JPG)\n![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0594.JPG)\n![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0595.JPG)\n![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0596.JPG)\n![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0597.JPG)\n\n","source":"_posts/Velocity大会总结.md","raw":"title:  Velocity会议总结\ndate: 2015-08-19 19:52:16\ntags: velocity\n---\n\n关键词：https优化，前端加载优化，hybrid，APM(application performance monitor）。\n\n1. https优化。\n> - HttpDNS, 通过http方式向第三方的固定IP方式来获取指定域名的IP来进行DNS解析[^httpDNS]（我们可以考虑在客户端新增HttpDNS）\n> - 启用HSTS[^HSTS] （我们尚未全站启用https，所以这个不太好启动）\n> - 启用OCSP Stapling[^OCSP]（可以采用，但需要查看兼容性以及要及时更新签名，以及注意证书链大小）\n> - 复用session，减少握手次数\n> - 精确设置TLS Record Size，size过小，overhead比重增大，size过大，单record的TCP分段过多\n> - TLS硬件加速\n> - SPDY/HTTP2.0，可以研究，但近期可能用不上。\n> - 配置Forward secrecy cipher 支持False start[^falsestart]  （可以采用，省掉一个RTT时间）\n> - 升级openssl版本到最新（我们的版本是openssl-1.0.2c）\n> - 确认TLS压缩禁用（nginx 1.3.x以上版本都自动关闭，不关闭有漏洞，我们nginx是1.6.3）\n> - 确认SNI支持 （已支持，多个证书部署在同一个IP上）\n> - 使用 **//**，来引用静态资源文件，保证http能无缝迁到https环境（我们已经使用了，但是一个360的同僚说在某些地方的移动运营商会将**//** 篡改为 **/**。但是iPhone5s 上海中国移动未发现问题）。\n> ![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0612.JPG)\n\n2. 页面直出方法，对比？\n> - nginx + lua 页面直出（京东618采用）\n> ![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0571.JPG)\n> - ATS （apache traffic server）页面直出（Yahoo采用）\n> - nodejs直出\n\n3. 前端加载优化\n> - ebay优化尝试：DSA（dynamic site accelerate）动态加速，加快页面加载，采用WebP格式优化图片大小（理论能优化到以前60%大小）。\n> - composition layer，z-index相同导致的渲染变慢（阿里分享），可查看 [css conf](http://www.w3ctech.com/topic/1463) 360的分享有讨论此问题。\n\n4. hybrid\n> - 百度 Blend UI系统架构。通过封装统一JS UI API，如果是在百度app内部的webview，则调用的是原生的UI样式，否则调用的是JS统一的UI样式[^blendUI]\n> - Yahoo 采用reactjs + [flux](https://facebook.github.io/flux/)\n\n\n5. APM\n> - 今年的趋势是APM（application performance monitor），赞助商基本都是APM厂商（云智慧，性能魔方，性能极客，OneAPM，野狗等）。\n> - 我们正在试用[OneAPM](https://tpm.oneapm.com/tpm/account/717715137/browser/1326753/overview/#/)进行页面加载测试。\n\n#### 总结：\n\n##### 一些方法论：\n> - 保持simplicity\n> ![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0560.JPG)\n> - build high performance team\n> ![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0585.JPG)\n> - 优化问题方法论\n> ![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0616.JPG)\n\n\n##### 我们暂时能够跟进的：\n> - 客户端采用http协议的httpDNS来加速DNS查询，能有效防止之前DNS解析问题。\n> - https优化全部跟进，已将dev全部改成TLSv1.2，排期全部改造并上线。\n> - CDN动态加速（DSA）咨询，并开启。\n> - hybrid现阶段讨论结果是采用PhoneGap。\n> - 试用OneAPM跟进数据，然后基于数据进行优化。\n\n\n##### 一些有用的网站分享：\n1. 关于html标准的网站。\n> - [specifiction](http://specifiction.wicg.io)|[Discourse](http://discourse.wicg.io) ask question\n> - Contribute tests on [testthewebforward](http://testthewebforward.org)\n> - [W3 Community](http://www.w3.org/community/wicg)\n> - [extensiblewebmanifesto](http://extensiblewebmanifesto.org)\n> - [webcomponents](http://webcomponents.org)\n\n2. [SSLLabs](https://ssllabs.com/) 查看你的网站https安不安全\n3. [百度https实践](http://op.baidu.com/2015/04/https-s01a01/)\n\n[^httpDNS]: 这种方式可以解释我们之前域名被加黑名单的问题，但是如果又新增加域名，得客户端随时修改，建议通过下发方式来实现新域名prefetch。\n\n[^HSTS]: HTTP Strict Transport Security。我们现在请求http的站点时，会自动跳转到https的页面，其实这一步是存在安全风险的，但是通过HSTS，设置响应头Strict-Transport-Security: max-age=31536000; includeSubDomains，可保证用户即使输入http页面，也在浏览器级别会自动请求https页面，不需要经过服务器跳转。\n\n[^OCSP]: 浏览器在下载服务端的证书之后会向证书发行商验证证书的合法性。因为是向国外网站验证，所以速度慢并存在着失败的可能性。所以可用的做法是在服务器端预先向服务器进行验证，然后打包证书供浏览器下载，这样浏览器就不用再去验证证书的合法性。注意，有效期大概为1个月。详见[网址](https://blog.xjpvictor.info/2013/09/nginx-ocsp-stapling/)。\n\n[^falsestart]: 查看[网址](http://chimera.labs.oreilly.com/books/1230000000545/ch04.html)，啥是false start（抢跑）。\n\n[^blendUI]: 百度blendUI详细如下：\n![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0593.JPG)\n![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0594.JPG)\n![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0595.JPG)\n![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0596.JPG)\n![enter image description here](http://7xkybo.com1.z0.glb.clouddn.com/IMG_0597.JPG)\n\n","slug":"Velocity大会总结","published":1,"updated":"2015-09-04T10:10:59.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cie5qb1ex000an7b9xc49777l"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"cie5qb1eh0002n7b9xkv4brj1","tag_id":"cie5qb1el0003n7b9jv0m8v93","_id":"cie5qb1en0004n7b97gmzm10y"},{"post_id":"cie5qb1es0006n7b9lyv4rja9","tag_id":"cie5qb1et0007n7b9ruc1eepb","_id":"cie5qb1eu0008n7b9higvam41"},{"post_id":"cie5qb1ex000an7b9xc49777l","tag_id":"cie5qb1ey000bn7b9svyluei6","_id":"cie5qb1ez000cn7b90b8zlv7x"},{"post_id":"cie5qb1ev0009n7b9kivds01n","tag_id":"cie5v8gqs0000xbb906jobd60","_id":"cie5v8gqw0003xbb9ja234wue"},{"post_id":"cie5qb1ev0009n7b9kivds01n","tag_id":"cie5v8gqu0001xbb9v7j16pjd","_id":"cie5v8gqw0004xbb9e4bqxcjl"},{"post_id":"cie5qb1ev0009n7b9kivds01n","tag_id":"cie5v8gqv0002xbb9snyix0io","_id":"cie5v8gqw0005xbb985ov2kfn"}],"Tag":[{"name":"reactjs","_id":"cie5qb1el0003n7b9jv0m8v93"},{"name":"多说","_id":"cie5qb1et0007n7b9ruc1eepb"},{"name":"velocity","_id":"cie5qb1ey000bn7b9svyluei6"},{"name":"OneApm, APM, monitor","_id":"cie5uyt9n0000vqb9rfbx34fr"},{"name":"OneApm APM monitor","_id":"cie5v5q4l0000wyb9wp0igf1w"},{"name":"OneApm","_id":"cie5v8gqs0000xbb906jobd60"},{"name":"APM","_id":"cie5v8gqu0001xbb9v7j16pjd"},{"name":"monitor","_id":"cie5v8gqv0002xbb9snyix0io"}]}}